<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
        <OutputType>Exe</OutputType>
        <TargetFramework>net7.0</TargetFramework>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <AWSProjectType>Lambda</AWSProjectType>
        <AssemblyName>bootstrap</AssemblyName>
        <!-- This property makes the build directory similar to a publish directory and helps the AWS .NET Lambda Mock Test Tool find project dependencies. -->
        <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
        <!-- Generate Native AOT image during publishing to improve cold start time. -->
        <PublishAot>true</PublishAot>
        <!-- StripSymbols tells the compiler to strip debugging symbols from the final executable if we're on Linux and put them into their own file. 
        This will greatly reduce the final executable's size.-->
        <StripSymbols>true</StripSymbols>
        <TrimMode>partial</TrimMode>
    </PropertyGroup>
    <ItemGroup Condition="'$(RuntimeIdentifier)' == 'linux-arm64'">
        <RuntimeHostConfigurationOption Include="System.Globalization.AppLocalIcu" Value="68.2.0.9" />
        <PackageReference Include="Microsoft.ICU.ICU4C.Runtime" Version="68.2.0.9" />
    </ItemGroup>
    <ItemGroup>
        <PackageReference Include="Amazon.Lambda.RuntimeSupport" Version="1.8.7" />
        <PackageReference Include="Amazon.Lambda.Core" Version="2.1.0" />
        <PackageReference Include="Amazon.Lambda.APIGatewayEvents" Version="2.5.0" />
        <PackageReference Include="Amazon.Lambda.Serialization.SystemTextJson" Version="2.3.0" />
        <PackageReference Include="AWSSDK.DynamoDBv2" Version="3.7.101.14" />
        <PackageReference Include="AWSXRayRecorder.Handlers.AwsSdk" Version="2.12.0" />
    </ItemGroup>
    <ItemGroup>
        <TrimmerRootAssembly Include="AWSSDK.Core" />
        <TrimmerRootAssembly Include="Amazon.Lambda.APIGatewayEvents" />
        <TrimmerRootAssembly Include="AWS.Lambda.Powertools.Common" />
        <TrimmerRootAssembly Include="AWS.Lambda.Powertools.Logging" />
        <TrimmerRootAssembly Include="AWS.Lambda.Powertools.Metrics" />
        <TrimmerRootAssembly Include="AWS.Lambda.Powertools.Tracing" />
        <TrimmerRootAssembly Include="AWSXRayRecorder.Core" />
        <TrimmerRootAssembly Include="AWSXRayRecorder.Handlers.AwsSdk" />
        <TrimmerRootAssembly Include="bootstrap" />
    </ItemGroup>
    <ItemGroup>
      <Reference Include="AWS.Lambda.Powertools.Common">
        <HintPath>Assemblies\AWS.Lambda.Powertools.Common.dll</HintPath>
      </Reference>
      <Reference Include="AWS.Lambda.Powertools.Logging">
        <HintPath>Assemblies\AWS.Lambda.Powertools.Logging.dll</HintPath>
      </Reference>
      <Reference Include="AWS.Lambda.Powertools.Metrics">
        <HintPath>Assemblies\AWS.Lambda.Powertools.Metrics.dll</HintPath>
      </Reference>
      <Reference Include="AWS.Lambda.Powertools.Tracing">
        <HintPath>Assemblies\AWS.Lambda.Powertools.Tracing.dll</HintPath>
      </Reference>
    </ItemGroup>
</Project>
